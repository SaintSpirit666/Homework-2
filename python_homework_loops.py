"""
Домашнее задание к лекции "Введение в типы данных и циклы. Часть 1"
Автор: [Шефер Э.А.]
Дата: 04.02.2026
"""

# ============================================================================
# Задание 1
# Дана переменная, в которой хранится слово из латинских букв.
# Напишите код, который выводит на экран:
# - среднюю букву, если число букв в слове нечетное;
# - две средних буквы, если число букв четное.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 1: Вывод средних букв слова")
print("=" * 80)

word = 'test'

length = len(word)
middle = length // 2

if length % 2 == 0:
    # Четное количество букв - выводим две средние
    print(word[middle - 1:middle + 1])
else:
    # Нечетное количество букв - выводим одну среднюю
    print(word[middle])

print()


# ============================================================================
# Задание 2
# Напишите программу, которая последовательно запрашивает у пользователя числа
# (по одному за раз) и после первого нуля выводит сумму всех ранее введенных чисел.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 2: Сумма чисел до первого нуля")
print("=" * 80)

total_sum = 0

while True:
    number = int(input("Введите число:\n"))
    
    if number == 0:
        break
    
    total_sum += number

print(f"Результат:\n{total_sum}")

print()


# ============================================================================
# Задание 3
# Мы делаем MVP dating-сервиса, и у нас есть список парней и девушек.
# Выдвигаем гипотезу: лучшие рекомендации мы получим, если просто отсортируем
# имена по алфавиту и познакомим людей с одинаковыми индексами после сортировки!
# Но мы не будем никого знакомить, если кто-то может остаться без пары.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 3: Dating-сервис")
print("=" * 80)

boys = ['Peter', 'Alex', 'John', 'Arthur', 'Richard']
girls = ['Kate', 'Liza', 'Kira', 'Emma', 'Trisha']

if len(boys) != len(girls):
    print("Внимание, кто-то может остаться без пары!")
else:
    # Сортируем оба списка
    boys_sorted = sorted(boys)
    girls_sorted = sorted(girls)
    
    print("Идеальные пары:")
    for i in range(len(boys_sorted)):
        print(f"{boys_sorted[i]} и {girls_sorted[i]}")

print()


# ============================================================================
# Задание 4
# У нас есть список, содержащий информацию о среднедневной температуре в Фаренгейтах
# за произвольный период по странам. Необходимо написать код, который рассчитает
# среднюю температуру за период в Цельсиях для каждой страны.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 4: Конвертация температуры из Фаренгейта в Цельсий")
print("=" * 80)

countries_temperature = [
    ['Таиланд', [75.2, 77, 78.8, 73.4, 68, 75.2, 77]],
    ['Германия', [57.2, 55.4, 59, 59, 53.6]],
    ['Россия', [35.6, 37.4, 39.2, 41, 42.8, 39.2, 35.6]],
    ['Польша', [50, 50, 53.6, 57.2, 55.4, 55.4]]
]

print("Средняя температура в странах:")

for country_data in countries_temperature:
    country_name = country_data[0]
    temperatures_f = country_data[1]
    
    # Конвертируем каждую температуру из Фаренгейта в Цельсий
    # Формула: C = (F - 32) * 5/9
    temperatures_c = [(temp - 32) * 5 / 9 for temp in temperatures_f]
    
    # Вычисляем среднюю температуру
    avg_temp_c = sum(temperatures_c) / len(temperatures_c)
    
    print(f"{country_name} - {avg_temp_c:.1f} С")

print()


# ============================================================================
# Задание 5 (необязательное)
# Имеется список с транспортными номерами. Необходимо написать код, который
# проверит каждый номер на валидность (1 буква, 3 цифры, 2 буквы, 2-3 цифры).
# Обратите внимание, что не все буквы кириллического алфавита используются
# в транспортных номерах.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 5: Валидация транспортных номеров")
print("=" * 80)

import re

car_ids = ['А222ВС96', 'АБ22ВВ193', 'К777МР123', 'Т001АА77', 'Щ123ЩЩ99']

# Допустимые буквы в гос номерах (те, что похожи на латинские)
valid_letters = 'АВЕКМНОРСТУХ'

# Паттерн: 1 буква, 3 цифры, 2 буквы, 2-3 цифры
pattern = r'^([' + valid_letters + r'])(\d{3})([' + valid_letters + r']{2})(\d{2,3})$'

for car_id in car_ids:
    match = re.match(pattern, car_id)
    
    if match:
        letter = match.group(1)
        digits = match.group(2)
        letters = match.group(3)
        region = match.group(4)
        
        print(f"Номер {letter}{digits}{letters} валиден. Регион: {region}")
    else:
        print(f"Номер {car_id} не валиден")

print()


# ============================================================================
# Задание 6 (необязательное)
# Дан поток логов по количеству просмотренных страниц для каждого пользователя
# (пользователь,дата;просмотры). Вам необходимо написать алгоритм, который считает
# среднее значение просмотров на пользователя.
# ============================================================================

print("=" * 80)
print("ЗАДАНИЕ 6: Анализ логов просмотров")
print("=" * 80)

stream = [
    'user4,2021-01-01;3',
    'user3,2022-01-07;4',
    'user2,2022-03-29;1',
    'user1,2020-04-04;13',
    'user2,2022-01-05;7',
    'user1,2021-06-14;4',
    'user3,2022-07-02;10',
    'user4,2021-03-21;19',
    'user4,2022-03-22;4',
    'user4,2022-04-22;8',
    'user4,2021-05-03;9',
    'user4,2022-05-11;11'
]

# Словарь для хранения суммы просмотров по каждому пользователю
user_views = {}

# Паттерн для парсинга строки: user,date;views
pattern = r'^([^,]+),[^;]+;(\d+)$'

for log_entry in stream:
    match = re.match(pattern, log_entry)
    
    if match:
        user = match.group(1)
        views = int(match.group(2))
        
        # Суммируем просмотры для каждого пользователя
        if user in user_views:
            user_views[user] += views
        else:
            user_views[user] = views

# Вычисляем среднее количество просмотров на уникального пользователя
total_views = sum(user_views.values())
unique_users = len(user_views)
average_views = total_views / unique_users

print(f"Среднее количество просмотров на уникального пользователя: {average_views:.2f}")

print()
print("=" * 80)
print("Все задания выполнены!")
print("=" * 80)
